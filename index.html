<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container my-3">
        <div class="d-flex justify-content-end">
            <div class="avatar d-flex justify-content-center align-items-center">
                <div class="fw-bold text-white fs-6">PP</div>
            </div>
        </div>
    </div>

    <div class="container text-white my-3">
        <h5>Hello, Pen Programmer</h5>
        <p class="date" id="today-date"></p>
    </div>

    <div class="container my-3">
        <div class="row">
            <div class="col-6">
                <a href="add_transaction.html" class="text-decoration-none">
                    <div class="expense p-3 text-white">
                        <i class="fa-solid fa-circle-arrow-up fs-4 mb-5"></i>
                        <h3 class="mb-0" id="expense">₹200</h3>
                        <p class="text-sm mb-0">Total Expense</p>
                    </div>
                </a>
            </div>
            <div class="col-6">
                <a href="add_transaction.html" class="text-decoration-none">
                    <div class="income p-3 text-white">
                        <i class="fa-solid fa-circle-arrow-down fs-4 mb-5"></i>
                        <h3 class="mb-0" id="income">₹200</h3>
                        <p class="text-sm mb-0">Total Income</p>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <div class="container text-white my-3">
        <h6>Recent Transactions</h6>
        <div class="transactions my-3" id="transactions"></div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>


    <script>

        var income = document.getElementById("income");
        var expense = document.getElementById("expense");
        var transactionsParent = document.getElementById("transactions");
        document.getElementById("today-date").innerText = new Date().toLocaleDateString();

        var transactions = JSON.parse(localStorage.getItem("transactions")) ?? [];
        var incomeAmount = 0;
        var expenseAmount = 0;
        var transactionElements = '';

        if (transactions.length == 0) {
            transactionElements = `
            <div class="border rounded text-center p-3">No transaction found</div>
            `
        }

        transactions.reverse().forEach(function (data) {
            transactionElements += `
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="icon tr-icon d-flex align-items-center justify-content-center me-3">
                   ${data.type == 'expense' ? '<i class="fa-solid fa-circle-arrow-up text-danger fs-4"></i>' : '  <i class="fa-solid fa-circle-arrow-down text-success fs-4"></i>'}
                </div>
                <div class="details me-auto">
                    <p class="text-sm fw-bold mb-0">${data.title}</p>
                    <p class="text-sm mb-0 text-muted">${data.created}</p>
                </div>
                <div class="amount">
                    <h6 class="fw-bold mb-0">${data.type == 'expense' ? '-' : '+'} ₹${data.price}</h6>
                </div>
            </div>
            `
            if (data.type == 'income') {
                incomeAmount += Number(data.price)
            } else {
                expenseAmount += Number(data.price)
            }
        })

        income.innerText = '₹' + incomeAmount;
        expense.innerText = '₹' + expenseAmount;
        transactionsParent.innerHTML = transactionElements;
    </script>
</body>

</html>